{"version":3,"sources":["../../src/pages/listado/listado.module.ts","../../src/pages/listado/listado.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ListadoPage } from './listado';\n\n@NgModule({\n  declarations: [\n    ListadoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ListadoPage),\n  ],\n})\nexport class ListadoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listado/listado.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController} from 'ionic-angular';\nimport { DbProvider } from '../../providers/db/db';\nimport { AlertController } from 'ionic-angular';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-listado',\n  templateUrl: 'listado.html',\n})\n\nexport class ListadoPage {\n  sitios: any;\n  constructor(\n    public navCtrl: NavController, \n    public navParams: NavParams, \n    public db:DbProvider, \n    public modalCtrl:ModalController, \n    public alertCtrl:AlertController) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ListadoPage');\n  }\n\n  ionViewDidEnter(){ //Se ejecuta cuando la página ha sido cargada y ahora es la página activa.\n    this.llenarArraySitios()\n  }\n\n  muestraSitio(sitio){\n    let modalSitio = this.modalCtrl.create( 'ModalDetalleSitioPage', sitio );\n    modalSitio.present();\n }\n\n  borrarSitio(id){\n    let alert = this.alertCtrl.create({\n      title: 'Confirmar borrado',\n      message: '¿Estás seguro de que deseas eliminar este sitio?',\n      buttons: [\n        {\n          text: 'No',\n          role: 'cancel',\n          handler: () => {\n            // Ha respondido que no así que no hacemos nada\n          }\n        },\n        {\n          text: 'Si',\n          handler: () => {\n            this.db.borrarSitio(id).then((res)=>{\n              // Una vez borrado el sitio recargamos el listado\n              this.llenarArraySitios()\n            },(err)=>{ /* alert('error al borrar de la bd'+err) */ });\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  llenarArraySitios(){\n    this.db.getSitios().then((res)=>{\n      this.sitios = [];\n      for(var i = 0; i < res.rows.length; i++){\n        this.sitios.push({\n          id: res.rows.item(i).id, \n          lat: res.rows.item(i).lat, \n          lng: res.rows.item(i).lng, \n          address: res.rows.item(i).address,\n          description: res.rows.item(i).description,\n          foto: res.rows.item(i).foto\n        });\n      }\n    },(err)=>{ /* alert('error al sacar de la bd'+err) */ })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/listado/listado.ts"],"sourceRoot":""}