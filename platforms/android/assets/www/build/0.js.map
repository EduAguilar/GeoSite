{"version":3,"sources":["../../src/pages/modal-nuevo-sitio/modal-nuevo-sitio.module.ts","../../src/pages/modal-nuevo-sitio/modal-nuevo-sitio.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ModalNuevoSitioPage } from './modal-nuevo-sitio';\n\n@NgModule({\n  declarations: [\n    ModalNuevoSitioPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalNuevoSitioPage),\n  ],\n})\nexport class ModalNuevoSitioPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-nuevo-sitio/modal-nuevo-sitio.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ViewController} from 'ionic-angular';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\nimport { DbProvider } from '../../providers/db/db';\n/**\n * Generated class for the ModalNuevoSitioPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\ndeclare var google: any;\n\n@IonicPage()\n@Component({\n  selector: 'page-modal-nuevo-sitio',\n  templateUrl: 'modal-nuevo-sitio.html',\n})\nexport class ModalNuevoSitioPage {\n\n  coords : any = { lat: 0, lng: 0 };\n  address: string;\n  description: string = '';\n  foto: any = '';\n\n  constructor(\n      public navCtrl: NavController, \n      public navParams: NavParams, \n      private viewCtrl : ViewController, \n      private camera: Camera, \n      private db: DbProvider) {\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ModalNuevoSitioPage');\n    this.coords.lat = this.navParams.get('lat');\n    this.coords.lng = this.navParams.get('lng');\n    this.getAddress(this.coords).then(results=> {\n      this.address = results[0]['formatted_address'];\n    }, errStatus => {\n        // Aquí iría el código para manejar el error\n    });\n  }\n\n  cerrarModal(){ \n    this.viewCtrl.dismiss();\n  }\n\n  getAddress(coords):any {\n    var geocoder = new google.maps.Geocoder();\n\n    return new Promise(function(resolve, reject) {\n        geocoder.geocode({'location': coords} , function (results, status) { // llamado asincronamente\n            if (status == google.maps.GeocoderStatus.OK) {\n                resolve(results);\n            } else {\n                reject(status);\n            }\n        });\n    });\n  }\n\n  sacarFoto(){\n    \n        let cameraOptions : CameraOptions = {\n            quality: 50,\n            encodingType: this.camera.EncodingType.JPEG, \n            targetWidth: 800,\n            targetHeight: 600,\n            destinationType: this.camera.DestinationType.DATA_URL,\n            sourceType: this.camera.PictureSourceType.CAMERA,\n            correctOrientation: true\n        }\n    \n    \n        this.camera.getPicture(cameraOptions).then((imageData) => {\n          // imageData is a base64 encoded string\n            this.foto = \"data:image/jpeg;base64,\" + imageData;\n        }, (err) => {\n            console.log(err);\n        });\n    }\n\n    guardarSitio(){\n        let sitio = {\n          lat: this.coords.lat,\n          lng: this.coords.lng , \n          address: this.address, \n          description: this.description, \n          foto: this.foto\n        }\n        this.db.addSitio(sitio).then((res)=>{\n          this.cerrarModal();\n         /*  alert('se ha introducido correctamente en la bd'); */\n        },(err)=>{ /* alert('error al meter en la bd'+err) */ }) \n    }\n\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/modal-nuevo-sitio/modal-nuevo-sitio.ts"],"sourceRoot":""}